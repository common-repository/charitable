"use strict";var CharitableChecklist=window.CharitableChecklist||function(t,e,$){var a={init:function(){$(a.ready),$(e).on("load",(function(){"function"==typeof $.ready.then?$.ready.then(a.load):a.load()}))},ready:function(){},load:function(){a.setup()},setup:function(){"undefined"!=typeof Shepherd&&"undefined"!=typeof charitable_admin_checklist_onboarding&&void 0!==charitable_admin_checklist_onboarding.option&&void 0!==charitable_admin_checklist_onboarding.option.tour&&void 0!==charitable_admin_checklist_onboarding.option.tour.status&&(e.location.search.includes("checklist")&&e.location.hash&&a.setupChecklistPage(),e.location.search.includes("page=charitable-setup-checklist")&&a.setupChecklistPage(),$(e).on("hashchange",(function(){e.location.search.includes("checklist")&&e.location.hash&&a.setupChecklistPage()})),a.events(),"init"===charitable_admin_checklist_onboarding.option.tour.status||"started"===charitable_admin_checklist_onboarding.option.tour.status||""===charitable_admin_checklist_onboarding.option.tour.status?(a.setupChecklistGeneralSettings(),a.setupChecklistEmailSettings(),a.setupChecklistGatewaySettings()):charitable_admin_checklist_onboarding.option.tour.status)},setupChecklistPage:function(){var t=null;if(console.log("window.location.hash"),console.log(e.location.hash),$(".charitable-step.charitable-step-fundraising-next-level").on("click",".charitable-button",(function(){$(this).attr("disabled","disabled").css("opacity","0.5");a.saveChecklistOption({stepStatus:"completed",step:"next-level"}).done((function(){e.location.href=e.location.href.split("#")[0]}))})),"#general-settings"===e.location.hash)t=$(".charitable-step.charitable-step-plugin-config");else if("#email-settings"===e.location.hash)t=$(".charitable-step.charitable-step-email-settings");else if("#connect-gateway"===e.location.hash)t=$(".charitable-step.charitable-step-connect-payment");else if("#first-campaign"===e.location.hash)t=$(".charitable-step.charitable-step-create-first-campaign");else if("#first-donation"===e.location.hash)t=$(".charitable-step.charitable-step-create-first-donation");else{if("#next-level"!==e.location.hash)return;t=$(".charitable-step.charitable-step-fundraising-next-level")}t.length&&($("html, body").animate({scrollTop:t.offset().top-50}),t.find(".charitable-angle-right").removeClass("charitable-angle-right"),t.find(".charitable-toggle-container").show(),t.addClass("charitable-step-highlight"),setTimeout((function(){t.removeClass("charitable-step-highlight")}),1e3))},setupChecklistGeneralSettings:function(){if(!e.location.search.includes("checklist=general-settings"))return;if(charitable_admin_checklist_onboarding.option.tour.steps_completed.includes("general-settings"))return;const t=new Shepherd.Tour({defaultStepOptions:{cancelIcon:{enabled:!0},classes:"",scrollTo:{behavior:"smooth",block:"center"},when:{show(){$(".shepherd-target").removeClass("shepherd-target")}}},tourName:"wpchar-checklist-general-settings",useModalOverlay:!0});t.addStep({id:"wpchar-checklist-step-general-settings-0",title:charitable_admin_checklist_onboarding.strings.general_settings_step_0_title,text:charitable_admin_checklist_onboarding.strings.general_settings_step_0_text,arrow:!1,classes:"wpchar-checklist-step-general-settings-0",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-checklist-step-general-settings-1",text:charitable_admin_checklist_onboarding.strings.general_settings_step_1_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"p.submit .button.button-primary",on:"right"},classes:"wpchar-visual-campaign-builder-step-2",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){a.gotoTop(),t.next()}}]}),t.start()},setupChecklistEmailSettings:function(){if(!e.location.search.includes("checklist=email-settings"))return;if(charitable_admin_checklist_onboarding.option.tour.steps_completed.includes("email-settings"))return;const t=new Shepherd.Tour({defaultStepOptions:{cancelIcon:{enabled:!0},classes:"",scrollTo:{behavior:"smooth",block:"center"},when:{show(){$(".shepherd-target").removeClass("shepherd-target")}}},tourName:"wpchar-checklist-email-settings",useModalOverlay:!0});t.addStep({id:"wpchar-checklist-step-email-settings-0",title:charitable_admin_checklist_onboarding.strings.email_settings_step_0_title,text:charitable_admin_checklist_onboarding.strings.email_settings_step_0_text,arrow:!1,classes:"wpchar-checklist-step-email-settings-0",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-checklist-step-email-settings-1",text:charitable_admin_checklist_onboarding.strings.email_settings_step_1_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"td.charitable-fullwidth div.cf:nth-child(1)",on:"bottom"},classes:"wpchar-checklist-step-email-settings-1",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-checklist-step-email-settings-2",text:charitable_admin_checklist_onboarding.strings.email_settings_step_2_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"td.charitable-fullwidth div.cf:nth-child(3)",on:"bottom"},classes:"wpchar-checklist-step-email-settings-2",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-checklist-step-email-settings-3",text:charitable_admin_checklist_onboarding.strings.email_settings_step_3_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"p.submit .button.button-primary",on:"right"},classes:"wpchar-checklist-step-email-settings-3",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){a.gotoTop(),t.next()}}]}),t.start()},setupChecklistGatewaySettings:function(){if(!e.location.search.includes("checklist=connect-gateway"))return;if(charitable_admin_checklist_onboarding.option.tour.steps_completed.includes("connect-gateway"))return;const t=new Shepherd.Tour({defaultStepOptions:{cancelIcon:{enabled:!0},classes:"",scrollTo:{behavior:"smooth",block:"center"},when:{show(){$(".shepherd-target").removeClass("shepherd-target")}}},tourName:"wpchar-checklist-connect-gateway",useModalOverlay:!0});t.addStep({id:"wpchar-checklist-step-connect-gateway-0",text:charitable_admin_checklist_onboarding.strings.gateway_settings_step_0_text,arrow:!1,classes:"wpchar-checklist-step-connect-gateway-0",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-checklist-step-connect-gateway-1",text:charitable_admin_checklist_onboarding.strings.gateway_settings_step_1_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"td.charitable-fullwidth div.cf:nth-child(1)",on:"right"},classes:"wpchar-checklist-step-connect-gateway-1",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-checklist-step-connect-gateway-2",text:charitable_admin_checklist_onboarding.strings.gateway_settings_step_2_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"table.form-table tbody tr:nth-last-child(2) input",on:"right"},classes:"wpchar-checklist-step-connect-gateway-2",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-checklist-step-connect-gateway-3",text:charitable_admin_checklist_onboarding.strings.gateway_settings_step_3_text,arrow:!0,modalOverlayOpeningPadding:8,cancelIcon:{enabled:!1},attachTo:{element:"p.submit .button.button-primary",on:"right"},classes:"wpchar-checklist-step-connect-gateway-3",buttons:[{text:charitable_admin_checklist_onboarding.strings.ok,classes:"charitable-tour-btn-primary",action:function(){a.gotoTop(),t.next()}}]}),t.start()},gotoTop:function(){$("html, body").animate({scrollTop:0},"slow",(function(){}))},setupChecklist:function(){const t=new Shepherd.Tour({defaultStepOptions:{cancelIcon:{enabled:!0},classes:"",scrollTo:{behavior:"smooth",block:"center"},when:{show(){const e=$(".shepherd-footer"),a=t?.getCurrentStep(),i=t?.steps.indexOf(a)+1,n=t?.steps.length;if(1!==i&&i!==n){var s=i/n*100;s>100&&(s=100),e.after('<span class="chartiable-tour-progress-bar"><span class="charitable-tour-progress" style="width: '+s+'%"></span></span>'),i>2&&$(".shepherd-target").removeClass("shepherd-target")}}}},tourName:"wpchar-visual-campaign-builder",useModalOverlay:!0});t.addStep({id:"wpchar-visual-campaign-builder-step-0",text:charitable_builder.onboarding_tour.step_0_text,arrow:!1,classes:"wpchar-visual-campaign-builder-step-0",buttons:[{text:charitable_builder.onboarding_tour.start_tour,classes:"charitable-tour-btn-primary",action:t.next},{text:charitable_builder.onboarding_tour.watch_video,classes:"charitable-tour-btn-primary",action:function(){a.openVideo()}}]});t.addStep({id:"wpchar-visual-campaign-builder-step-1",title:charitable_builder.onboarding_tour.step_1_title,text:charitable_builder.onboarding_tour.step_1_text,attachTo:{element:"#charitable_settings_title",on:"bottom"},classes:"wpchar-visual-campaign-builder-step-1",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary charitable-tour-btn-disabled",action:t.next}]});t.addStep({id:"wpchar-visual-campaign-builder-step-2",title:charitable_builder.onboarding_tour.step_2_title,text:charitable_builder.onboarding_tour.step_2_text,arrow:!0,modalOverlayOpeningPadding:8,attachTo:{element:".charitable-template-animal-sanctuary div.charitable-template",on:"right"},classes:"wpchar-visual-campaign-builder-step-2",buttons:[{text:charitable_builder.onboarding_tour.choose_a_template,classes:"charitable-tour-btn-primary",action:t.hide}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-3",title:charitable_builder.onboarding_tour.step_3_title,text:charitable_builder.onboarding_tour.step_3_text,arrow:!0,modalOverlayOpeningPadding:5,attachTo:{element:"#add-layout",on:"right-end"},classes:"wpchar-visual-campaign-builder-step-3",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-4",title:charitable_builder.onboarding_tour.step_4_title,text:charitable_builder.onboarding_tour.step_4_text,arrow:!0,modalOverlayOpeningPadding:5,attachTo:{element:"#charitable-tour-block-1",on:"left"},classes:"wpchar-visual-campaign-builder-step-4",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-5",title:charitable_builder.onboarding_tour.step_5_title,text:charitable_builder.onboarding_tour.step_5_text,arrow:!0,modalOverlayOpeningPadding:5,attachTo:{element:"#charitable-tour-block-2",on:"left"},classes:"wpchar-visual-campaign-builder-step-5",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-6",title:charitable_builder.onboarding_tour.step_6_title,text:charitable_builder.onboarding_tour.step_6_text,arrow:!0,modalOverlayOpeningPadding:5,attachTo:{element:"#charitable-tour-block-3",on:"left"},classes:"wpchar-visual-campaign-builder-step-6",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:t.next}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-7",title:charitable_builder.onboarding_tour.step_7_title,text:charitable_builder.onboarding_tour.step_7_text,arrow:!0,modalOverlayOpeningPadding:5,attachTo:{element:"#charitable-save",on:"top-end"},classes:"wpchar-visual-campaign-builder-step-7",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){a.gotoDraftPublishStep(),t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-8",title:charitable_builder.onboarding_tour.step_8_title,text:charitable_builder.onboarding_tour.step_8_text,arrow:!0,modalOverlayOpeningPadding:10,attachTo:{element:"#charitable-tour-block-4",on:"left-start"},classes:"wpchar-visual-campaign-builder-step-8",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){a.undoDraftPublishStep(),t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-9",title:charitable_builder.onboarding_tour.step_9_title,text:charitable_builder.onboarding_tour.step_9_text,arrow:!0,modalOverlayOpeningPadding:3,attachTo:{element:"#charitable-preview-btn",on:"top"},classes:"wpchar-visual-campaign-builder-step-9",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-10",title:charitable_builder.onboarding_tour.step_10_title,text:charitable_builder.onboarding_tour.step_10_text,arrow:!0,modalOverlayOpeningPadding:3,attachTo:{element:"#charitable-view-btn",on:"top"},classes:"wpchar-visual-campaign-builder-step-10",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-11",title:charitable_builder.onboarding_tour.step_11_title,text:charitable_builder.onboarding_tour.step_11_text,arrow:!0,modalOverlayOpeningPadding:3,attachTo:{element:"#charitable-embed",on:"top"},classes:"wpchar-visual-campaign-builder-step-11",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){a.gotoSettingsStep(),t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-12",title:charitable_builder.onboarding_tour.step_12_title,text:charitable_builder.onboarding_tour.step_12_text,arrow:!0,modalOverlayOpeningPadding:0,attachTo:{element:"#charitable-panel-settings .charitable-panel-sidebar",on:"right"},classes:"wpchar-visual-campaign-builder-step-12",buttons:[{text:charitable_builder.onboarding_tour.next,classes:"charitable-tour-btn-primary",action:function(){CharitableCampaignBuilder.panelSwitch("design"),t.next()}}]}),t.addStep({id:"wpchar-visual-campaign-builder-step-13",title:charitable_builder.onboarding_tour.step_13_title,text:charitable_builder.onboarding_tour.step_13_text,arrow:!1,classes:"wpchar-visual-campaign-builder-step-13",cancelIcon:{enabled:!1},buttons:[{text:charitable_builder.onboarding_tour.lets_get_started,classes:"charitable-tour-btn-primary",action:t.next}]}),t.start()},events:function(){$(".charitable-checklist-list-block").on("click",".checklist-skip",(function(t){a.skipChecklist(t)})),$(".charitable-checklist-list-block").on("click",".checklist-toggle",(function(t){a.toggleChecklist(t)}))},toggleChecklist:function(t){console.log(t.target);var e=$(t.target),i=$(".charitable-checklist-list-block");if(i.length&&e.length){i.hasClass("closed")?(charitable_admin_checklist_onboarding.option.window_closed="0",i.removeClass("closed"),setTimeout((function(){i.removeClass("transition-back")}),600)):(charitable_admin_checklist_onboarding.option.window_closed="1",i.addClass("closed"),setTimeout((function(){i.addClass("transition-back")}),600));var n={status:"",window_closed:charitable_admin_checklist_onboarding.option.window_closed};a.saveChecklistOption(n)}},skipChecklist:function(){$(".charitable-checklist").remove(),$('#adminmenu a[href="admin.php?page=charitable-setup-checklist"]').parent().remove(),a.saveChecklistOption({status:"skipped",seconds_spent:0,seconds_left:0})},saveChecklistOption:function(t){var e={action:"charitable_onboarding_checklist_save_option",option_data:t,_wpnonce:charitable_admin_checklist_onboarding.nonce};return $.post(ajaxurl,e,(function(t){t.success||console.error("Error saving Charitable Checklist option.")}))}};return a}(document,window,jQuery);CharitableChecklist.init();