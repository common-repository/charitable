var CharitableAdminUI=window.CharitableAdminUI||function(a,i,$){var t={},e={},n={settings:{clickWatch:!1},init:function(){t=this.settings,$(n.ready)},ready:function(){n.moveNavigationElements(),e.$addNewCampaignButton=$("body.post-type-campaign .page-title-action"),n.bindUIActions();var t=new URLSearchParams(i.location.search);t.has("create")&&"campaign"===t.get("create")&&(n.newCampaignPopup(),t.delete("create"),i.history.pushState({},"","/wp-admin/edit.php?"+t.toString())),$(a).ready((function(){n.scrollToAnchor()})),$(i).on("hashchange",(function(){n.scrollToAnchor()}))},moveNavigationElements:function(){$("body.post-type-charitable.edit-tags-php").length>0&&$("#charitable-tools-nav").insertBefore("h1.wp-heading-inline")},bindUIActions:function(){$("body.post-type-campaign").on("click",".charitable-campaign-list-banner a.button-link",(function(a){a.preventDefault(),n.campaignListBannerPopup()})),$("body.post-type-campaign").on("click",".jconfirm-closeIcon",(function(a){t.clickWatch=!1})),!1===t.clickWatch&&$("body.post-type-campaign").on("click","input.campaign_name",(function(a){a.preventDefault(),$(this).select(),t.clickWatch=!0})),$(".charitable-blank-slate-create-campaign").length>0&&$("body.post-type-campaign").on("click",".charitable-blank-slate-create-campaign",(function(a){a.preventDefault(),n.newCampaignPopup()})),n.initWelcome(),n.initUpgradeModal(),n.initNotifications()},initNotifications:function(){$("body .charitable-dashboard-notification-navigation").on("click","a",(function(a){a.preventDefault();var i=$(this),t=i.closest(".charitable-dashboard-notifications").find(".charitable-dashboard-notification:not(.charitable-hidden)").data("notification-number"),e=(i.closest(".charitable-dashboard-notifications").find(".charitable-dashboard-notification:not(.charitable-hidden)").data("notification-id"),i.closest(".charitable-dashboard-notifications").find(".charitable-dashboard-notification:not(.charitable-hidden)").data("notification-type"),i.closest(".charitable-dashboard-notifications").find(".charitable-dashboard-notification").length),n=i.closest(".charitable-dashboard-notifications");i.hasClass("next")?(n.find('.charitable-dashboard-notification[data-notification-number="'+t+'"]').addClass("charitable-hidden"),++t>e&&(t=1),n.find('.charitable-dashboard-notification[data-notification-number="'+t+'"]').removeClass("charitable-hidden")):i.hasClass("prev")&&(n.find('.charitable-dashboard-notification[data-notification-number="'+t+'"]').addClass("charitable-hidden"),--t<1&&(t=e),n.find('.charitable-dashboard-notification[data-notification-number="'+t+'"]').removeClass("charitable-hidden"))})),$("body .charitable-dashboard-notifications").on("click",".charitable-remove-dashboard-notification",(function(a){a.preventDefault();var i=$(this).closest(".charitable-dashboard-notifications"),t=i.find(".charitable-dashboard-notification:not(.charitable-hidden)").data("notification-id");$.ajax({type:"POST",url:ajaxurl,data:{action:"charitable_disable_dashboard_notification",notification_id:t,nonce:charitable_admin.nonce},success:function(a){a.success&&(i.find('.charitable-dashboard-notification[data-notification-id="'+t+'"]').remove(),0===i.find(".charitable-dashboard-notification").length&&i.remove())}})}))},scrollToAnchor:function(){var a=i.location.hash;if(a=a.substring(1)){a=a.replace(/[^a-zA-Z0-9-_]/g,"");var t=$("a#wpchr-"+a),e=!1;t.length&&(e=!!t.length&&t.closest(".charitable-growth-content")),$(".charitable-growth-content").removeClass("charitable-selected"),t.length&&($("html, body").animate({scrollTop:t.offset().top-100},1e3),e.addClass("charitable-selected"))}},newCampaignPopup:function(){var a="undefined"!=typeof charitable_admin&&void 0!==charitable_admin.admin_url?charitable_admin.admin_url:"/wp-admin/",t=.5*$(i).width();t>770&&(t=770),$.confirm({title:"Create Campaign",content:'<form id="create-campaign-form" method="POST" action="'+a+'admin.php?page=charitable-campaign-builder&view=template" class="formName"><div class="form-group"><label>Name:</label><input type="text" placeholder="Campaign Name" value="My New Campaign" name="campaign_name" class="name campaign_name form-control" required /></div></form>',closeIcon:!0,boxWidth:t+"px",useBootstrap:!1,type:"create-campaign",animation:"none",buttons:{formSubmit:{text:"Create Campaign",btnClass:"btn-green",action:function(){return this.$content.find(".campaign_name").val().trim()?($(".jconfirm-buttons button.btn").html("Creating..."),$("#create-campaign-form").submit(),!1):($.alert("Please provide a valid campaign name."),!1)}}},onContentReady:function(){}})},campaignListBannerPopup:function(){var a=void 0!==charitable_admin.plugin_asset_dir?charitable_admin.plugin_asset_dir:"/wp-content/plugins/charitable/assets";$.confirm({title:!1,content:'<div class="charitable-lite-pro-popup"><div class="charitable-lite-pro-popup-left" ><h1>The Ambassadors Extension is only available for Charitable Pro users.</h1><h2>Harness the power of supporter networks and friends to reach more people and raise more money for your cause.</h2><ul><li><p>Create a crowdfunding platform (similar to GoFundMe)</p></li><li><p>Simplified fundraiser creation and management</p></li><li><p>Let supporters fundraise together through our Teams feature</p></li><li><p>Integrate with email marketing to follow up with campaign creators</p></li><li><p>Give people a place to fundraise for their own cause</p></li></ul><a href="https://wpcharitable.com/lite-vs-pro/?utm_source=WordPress&utm_medium=Ambassadors+Campaign+Modal+Unlock&utm_campaign=WP+Charitable" target="_blank" class="charitable-lite-pro-popup-button">Unlock Peer-to-Peer Fundraising</a><a href="https://wpcharitable.com/lite-vs-pro/?utm_source=WordPress&utm_medium=Ambassadors+Campaign+Modal+More&utm_campaign=WP+Charitable" target="_blank" class="charitable-lite-pro-popup-link">Or learn more about the Ambassadors extension &rarr;</a></div><div class="charitable-lite-pro-popup-right" ><img src="'+a+'images/lite-to-pro/ambassador.png" alt="Charitable Ambassador Extension" ></img></div>',closeIcon:!0,alignMiddle:!0,boxWidth:"986px",useBootstrap:!1,animation:"none",buttons:!1,type:"lite-pro-ad",onContentReady:function(){}})},initWelcome:function(){$(a).on("click","#charitable-welcome .play-video",(function(a){a.preventDefault();"undefined"!=typeof jconfirm&&(jconfirm.defaults={closeIcon:!0,backgroundDismiss:!1,escapeKey:!0,animationBounce:1,useBootstrap:!1,theme:"modern",animateFromElement:!1},$.dialog({title:!1,content:'<div class="video-container"><iframe width="1280" height="720" src="https://www.youtube-nocookie.com/embed/834h3huzzk8?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>',closeIcon:!0,boxWidth:"1300"}))}))},initUpgradeModal:function(){$(a).on("click",".charitable-upgrade-modal",(function(){$.alert({title:charitable_admin.thanks_for_interest,content:charitable_admin.upgrade_modal,icon:"fa fa-info-circle",type:"blue",boxWidth:"550px",useBootstrap:!1,theme:"modern,charitable-install-form",closeIcon:!1,draggable:!1,buttons:{confirm:{text:charitable_admin.ok,btnClass:"btn-confirm",keys:["enter"]}}})}))}};return n}(document,window,jQuery);CharitableAdminUI.init();